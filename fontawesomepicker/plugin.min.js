"use strict";!function(){function e(e){e.ui.registry.addIcon(n,i),e.ui.registry.addButton(n,{icon:n,tooltip:n,onAction:function(){e.execCommand("mceOpenFontawesomepicker")}}),e.ui.registry.addMenuItem(n,{icon:n,text:n,onAction:function(){e.execCommand("mceOpenFontawesomepicker")}})}var n="fontawesomepicker",t="fontawesomepickerCallback",o=tinymce.util.Tools.resolve("tinymce.PluginManager"),c={loadStyle:function(e,n){if(!e.querySelector('link[href*="'+n+'"]')){var t=e.createElement("link");t.href=n,t.rel="stylesheet",e.head.appendChild(t)}},unique:function(e){var n=e.reduce(function(e,n){return e[n]=1,e},{});return Object.keys(n)},getRngNode:function(e){var n=e.selection.getRng(),t=n.startContainer;return 1!==t.nodeType&&(t=t.parentNode),t},jsonp:function(e,n,t){var o=document.createElement("script");o.src=e,o.charset="utf-8",document.head.appendChild(o),window[n]=t,o.onload=o.onerror=function(){delete window[n],o.parentNode.removeChild(o)}}},i='<svg width="24" height="24" viewBox="0 0 512 512"><path d="M116.65 219.35a15.68 15.68 0 0 0 22.65 0l96.75-99.83c28.15-29 26.5-77.1-4.91-103.88C203.75-7.7 163-3.5 137.86 22.44L128 32.58l-9.85-10.14C93.05-3.5 52.25-7.7 24.86 15.64c-31.41 26.78-33 74.85-5 103.88zm143.92 100.49h-48l-7.08-14.24a27.39 27.39 0 0 0-25.66-17.78h-71.71a27.39 27.39 0 0 0-25.66 17.78l-7 14.24h-48A27.45 27.45 0 0 0 0 347.3v137.25A27.44 27.44 0 0 0 27.43 512h233.14A27.45 27.45 0 0 0 288 484.55V347.3a27.45 27.45 0 0 0-27.43-27.46zM144 468a52 52 0 1 1 52-52 52 52 0 0 1-52 52zm355.4-115.9h-60.58l22.36-50.75c2.1-6.65-3.93-13.21-12.18-13.21h-75.59c-6.3 0-11.66 3.9-12.5 9.1l-16.8 106.93c-1 6.3 4.88 11.89 12.5 11.89h62.31l-24.2 83c-1.89 6.65 4.2 12.9 12.23 12.9a13.26 13.26 0 0 0 10.92-5.25l92.4-138.91c4.88-6.91-1.16-15.7-10.87-15.7zM478.08.33L329.51 23.17C314.87 25.42 304 38.92 304 54.83V161.6a83.25 83.25 0 0 0-16-1.7c-35.35 0-64 21.48-64 48s28.65 48 64 48c35.2 0 63.73-21.32 64-47.66V99.66l112-17.22v47.18a83.25 83.25 0 0 0-16-1.7c-35.35 0-64 21.48-64 48s28.65 48 64 48c35.2 0 63.73-21.32 64-47.66V32c0-19.48-16-34.42-33.92-31.67z"/></svg>',a=function(){function e(e,t){if(!i.all){var o=e.getParam("fontawesomeUrl");n(t),c.loadStyle(document,o),c.loadStyle(document,t+"/asset/style.css"),c.loadStyle(e.contentDocument,o)}}function n(e){c.jsonp(e+"/asset/categories.js",t,function(e){o(e)})}function o(e){i.all={icons:[],label:"all"};for(var n in e)i.all.icons=i.all.icons.concat(e[n].icons),i[n]=e[n];i.all.icons=c.unique(i.all.icons)}var i={},a="";return function(n,t){return n.on("init",e.bind(null,n,t)),{editor:n,open:function(){n.windowManager.open({title:"Icons",size:"large",body:{type:"panel",items:[{type:"htmlpanel",html:this.renderBody()}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]}),this.openAfter()},openAfter:function(){var e=this;e.changeNav("all"),n.$(".mce-fontawesomepicker--nav__item",document).off("click").on("click",function(){var n=this.getAttribute("title");e.changeNav(n)}),n.$(".mce-fontawesomepicker--icon",document).off("click").on("click",function(){var n=this.getAttribute("title");e.insertIcon(n)})},renderNav:function(){var e="";e+='<div class="mce-fontawesomepicker--nav">';for(var n in i){e+='<div class="mce-fontawesomepicker--nav__item" title="'+n+'">'+i[n].label+"</div>"}return e+="</div>"},renderIcons:function(){var e=this,n="";return n+='<div class="mce-fontawesomepicker--icons">',n+=i.all.icons.reduce(function(n,t){var o=e.toIconClass(t);return n+='<div class="mce-fontawesomepicker--icon" title="'+t+'">',n+='\t<span><i class="'+o+'"></i></span>',n+="\t<span>"+t+"</span>",n+="</div>"},""),n+="</div>"},renderBody:function(){return a||(a+='<div class="mce-fontawesomepicker--body">',a+='\t<div class="mce-fontawesomepicker--aside">',a+=this.renderNav(),a+="\t</div>",a+='\t<div class="mce-fontawesomepicker--content">',a+=this.renderIcons(),a+="\t</div>",a+="</div>")},toIconClass:function(e){var n=e.split("-")[0];return e.replace(n,n+" fa")},showIcons:function(e){var t=i[e];t&&n.$(".mce-fontawesomepicker--icon",document).each(function(e){var n=this.getAttribute("title");this.style.display=t.icons.includes(n)?"block":"none"})},changeNav:function(e){var n=document.querySelector(".mce-fontawesomepicker--nav__item.current"),t=document.querySelector('.mce-fontawesomepicker--nav__item[title="'+e+'"]');n&&n.classList.remove("current"),t&&t.classList.add("current"),this.showIcons(e)},insertIcon:function(e){var t=this.toIconClass(e),o='<span>\x3c!-- . --\x3e<span contenteditable="false" class="'+t+'"></span></span>';n.execCommand("mceInsertContent",!1,o),n.windowManager.close()}}}}();!function(){o.add(n,function(n,t){var o=a(n,t);return n.settings.extended_valid_elements=n.settings.extended_valid_elements||"",n.settings.extended_valid_elements+=",span[*]",n.addCommand("mceOpenFontawesomepicker",function(){o.open()}),e(n),{}})}()}();