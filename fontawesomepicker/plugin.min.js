!function(){"use strict";function d(a,b){if(!a.querySelector('link[href*="'+b+'"]')){var c=a.createElement("link");c.href=b,c.rel="stylesheet",a.head.appendChild(c)}}function e(a){const b={};return a.forEach(function(a){b[a]=1}),Object.keys(b)}function f(a){c.all={icons:[],label:"all"};for(var b in a)c.all.icons=c.all.icons.concat(a[b].icons),c[b]=a[b];c.all.icons=e(c.all.icons)}function g(a){return c.all?void 0:fetch(a+"/asset/categories.json").then(function(a){return a.json()}).then(function(a){f(a)})}function h(a,b){var c=a.getParam("fontawesomeUrl");g(b),d(document,c),d(document,b+"/asset/style.css"),d(a.contentDocument,c)}function i(a,b){this.editor=a,this.pluginUrl=b,this.$body=""}function j(a){a.editor.addCommand("mceShowFontawesomepicker",function(){a.open()})}function k(b){b.editor.ui.registry.addIcon(a,'<svg width="24" height="24" viewBox="0 0 512 512"><path d="M116.65 219.35a15.68 15.68 0 0 0 22.65 0l96.75-99.83c28.15-29 26.5-77.1-4.91-103.88C203.75-7.7 163-3.5 137.86 22.44L128 32.58l-9.85-10.14C93.05-3.5 52.25-7.7 24.86 15.64c-31.41 26.78-33 74.85-5 103.88zm143.92 100.49h-48l-7.08-14.24a27.39 27.39 0 0 0-25.66-17.78h-71.71a27.39 27.39 0 0 0-25.66 17.78l-7 14.24h-48A27.45 27.45 0 0 0 0 347.3v137.25A27.44 27.44 0 0 0 27.43 512h233.14A27.45 27.45 0 0 0 288 484.55V347.3a27.45 27.45 0 0 0-27.43-27.46zM144 468a52 52 0 1 1 52-52 52 52 0 0 1-52 52zm355.4-115.9h-60.58l22.36-50.75c2.1-6.65-3.93-13.21-12.18-13.21h-75.59c-6.3 0-11.66 3.9-12.5 9.1l-16.8 106.93c-1 6.3 4.88 11.89 12.5 11.89h62.31l-24.2 83c-1.89 6.65 4.2 12.9 12.23 12.9a13.26 13.26 0 0 0 10.92-5.25l92.4-138.91c4.88-6.91-1.16-15.7-10.87-15.7zM478.08.33L329.51 23.17C314.87 25.42 304 38.92 304 54.83V161.6a83.25 83.25 0 0 0-16-1.7c-35.35 0-64 21.48-64 48s28.65 48 64 48c35.2 0 63.73-21.32 64-47.66V99.66l112-17.22v47.18a83.25 83.25 0 0 0-16-1.7c-35.35 0-64 21.48-64 48s28.65 48 64 48c35.2 0 63.73-21.32 64-47.66V32c0-19.48-16-34.42-33.92-31.67z"/></svg>'),b.editor.ui.registry.addButton(a,{icon:a,tooltip:a,onAction:function(){return b.open()}}),b.editor.ui.registry.addMenuItem(a,{icon:a,text:a,onAction:function(){return b.open()}})}function l(a){a.settings.extended_valid_elements=a.settings.extended_valid_elements||"",a.settings.extended_valid_elements+=",span[*]"}function m(){b.add(a,function(a,b){var c=new i(a,b);return l(a),a.on("init",h.bind(null,a,b)),j(c),k(c),{}})}var a="fontawesomepicker",b=tinymce.util.Tools.resolve("tinymce.PluginManager"),c={};Object.assign(i.prototype,{renderNav:function(){var b,d,a="";a+='<div class="mce-fontawesomepicker--nav">';for(b in c)d=c[b],a+='<div class="mce-fontawesomepicker--nav__item" title="'+b+'">'+d.label+"</div>";return a+="</div>"},renderIcons:function(){var a=this,b="";return b+='<div class="mce-fontawesomepicker--icons">',b+=c.all.icons.reduce(function(b,c){var d=a.toIconClass(c);return b+='<div class="mce-fontawesomepicker--icon" title="'+c+'">',b+='	<span><i class="'+d+'"></i></span>',b+="	<span>"+c+"</span>",b+="</div>"},""),b+="</div>"},renderBody:function(){return this.$body?this.$body:(this.$body+='<div class="mce-fontawesomepicker--body">',this.$body+='	<div class="mce-fontawesomepicker--aside">',this.$body+=this.renderNav(),this.$body+="	</div>",this.$body+='	<div class="mce-fontawesomepicker--content">',this.$body+=this.renderIcons(),this.$body+="	</div>",this.$body+="</div>",this.$body)},open:function(){this.editor.windowManager.open({title:"Icons",size:"large",body:{type:"panel",items:[{type:"htmlpanel",html:this.renderBody()}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]}),this.openAfter()},openAfter:function(){var a=this;a.changeNav("all"),this.editor.$(".mce-fontawesomepicker--nav__item",document).off("click").on("click",function(){var b=this.getAttribute("title");a.changeNav(b)}),this.editor.$(".mce-fontawesomepicker--icon",document).off("click").on("click",function(){var b=this.getAttribute("title");a.insertIcon(b)})},toIconClass:function(a){var b=a.split("-")[0],c=a.replace(b,b+" fa");return c},showIcons:function(a){var b=c[a];b&&this.editor.$(".mce-fontawesomepicker--icon",document).each(function(){var c=this.getAttribute("title");this.style.display=b.icons.includes(c)?"block":"none"})},changeNav:function(a){var b=document.querySelector(".mce-fontawesomepicker--nav__item.current"),c=document.querySelector('.mce-fontawesomepicker--nav__item[title="'+a+'"]');b&&b.classList.remove("current"),c&&c.classList.add("current"),this.showIcons(a)},insertIcon:function(a){var b=this.toIconClass(a),c='<span><!-- . --><span contenteditable="false" class="'+b+'"></span></span>';this.editor.execCommand("mceInsertContent",!1,c),this.editor.windowManager.close()}}),m()}();